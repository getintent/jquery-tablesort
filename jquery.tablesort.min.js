/*
	A simple, lightweight jQuery plugin for creating sortable tables.
	https://github.com/kylefox/jquery-tablesort
	Version 0.0.7
*/
!function(t){t.tablesort=function(s,e){var i=this;this.$table=s,this.$thead=this.$table.find("thead"),this.settings=t.extend({},t.tablesort.defaults,e),this.$sortCells=this.$thead.length>0?this.$thead.find("th:not(.no-sort)"):this.$table.find("th:not(.no-sort)"),this.initCells(),this.$sortCells.bind("click.tablesort",function(){i.sort(t(this))}),this.index=null,this.$th=null,this.direction=null},t.tablesort.prototype={initCells:function(){var s=this,e=0;this.$sortCells.each(function(i,n){t(n).attr("data-sort-index",i),s.$table.find("tr td:nth-child("+(e+1)+")").attr("data-sort-index",i),e+=t(n).attr("colspan")?parseInt(t(n).attr("colspan")):parseInt(1)})},sort:function(s,e){var i=new Date,n=this,a=this.$table,o=this.$thead.length>0?a.find("tbody tr"):a.find("tr").has("td"),l=a.find("tr td[data-sort-index="+s.attr("data-sort-index")+"]"),r=s.data().sortBy,d=[],h=s.hasClass("sorted"),c=l.map(function(e,i){return r?"function"==typeof r?r(t(s),t(i),n):r:null!=t(this).data().sortValue?t(this).data().sortValue:t(this).text().toLowerCase()});0!==c.length&&("asc"!==e&&"desc"!==e?h?this.direction="asc"===this.direction?"desc":"asc":this.direction=this.direction?this.direction:this.settings.defaultDirection:this.direction=e,e="asc"==this.direction?1:-1,n.$table.trigger("tablesort:start",[n]),n.log("Sorting by "+this.index+" "+this.direction),n.$table.css("display"),setTimeout(function(){n.$sortCells.removeClass(n.settings.asc+" "+n.settings.desc);for(var r=0,h=c.length;h>r;r++)d.push({index:r,cell:l[r],row:o[r],value:c[r]});d.sort(function(t,s){return t.value>s.value?1*e:t.value<s.value?-1*e:0}),t.each(d,function(t,s){a.append(s.row)}),s.addClass(n.settings[n.direction]),n.log("Sort finished in "+((new Date).getTime()-i.getTime())+"ms"),n.$table.trigger("tablesort:complete",[n]),n.$table.css("display")},c.length>2e3?200:10))},log:function(s){(t.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+s)},destroy:function(){return this.$sortCells.unbind("click.tablesort"),this.$table.data("tablesort",null),null}},t.tablesort.DEBUG=!1,t.tablesort.defaults={debug:t.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending",defaultDirection:"asc"},t.fn.tablesort=function(s){var e,i;return this.each(function(){e=t(this),i=e.data("tablesort"),i&&i.destroy(),e.data("tablesort",new t.tablesort(e,s))})}}(window.Zepto||window.jQuery);